<!-- Replace your current script with this -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCPbOZwAZEMiC1LSDSgnSEPmSxQ7-pR2oQ",
    authDomain: "mirdhuna-25542.firebaseapp.com",
    databaseURL: "https://mirdhuna-25542-default-rtdb.firebaseio.com",
    projectId: "mirdhuna-25542",
    storageBucket: "mirdhuna-25542.firebasestorage.app",
    messagingSenderId: "575924409876",
    appId: "1:575924409876:web:6ba1ed88ce941d9c83b901",
    measurementId: "G-YB7LDKHBPV"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const sliderRef = db.ref('slider');

  // DOM Elements
  const sliderContainer = document.getElementById('slider');
  const nav = document.getElementById('sliderNav');

  // Listen for data changes
  sliderRef.on('value', (snapshot) => {
    const data = snapshot.val();

    if (data && Object.keys(data).length > 0) {
      const slides = Object.values(data);

      // Clear loading
      sliderContainer.innerHTML = '';
      nav.innerHTML = '';

      slides.forEach((slide, index) => {
        const slideEl = document.createElement('div');
        slideEl.classList.add('slide');
        if (slide.url) slideEl.style.backgroundImage = `url(${slide.url})`;

        const content = document.createElement('div');
        content.classList.add('slide-content');
        content.innerHTML = `<h2>${slide.text || 'No Title'}</h2>`;
        slideEl.appendChild(content);
        sliderContainer.appendChild(slideEl);

        const dot = document.createElement('div');
        dot.classList.add('slider-dot');
        if (index === 0) dot.classList.add('active');
        dot.addEventListener('click', () => goToSlide(index));
        nav.appendChild(dot);
      });

      // Initialize slider controls
      let currentSlide = 0;
      function updateSlider() {
        sliderContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
        document.querySelectorAll('.slider-dot').forEach((dot, i) => {
          dot.classList.toggle('active', i === currentSlide);
        });
      }

      window.goToSlide = (index) => {
        if (index >= 0 && index < slides.length) {
          currentSlide = index;
          updateSlider();
        }
      };

      // Buttons
      document.querySelector('.prev')?.addEventListener('click', () => {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        updateSlider();
      });

      document.querySelector('.next')?.addEventListener('click', () => {
        currentSlide = (currentSlide + 1) % slides.length;
        updateSlider();
      });

      // Initial render
      updateSlider();
    } else {
      sliderContainer.innerHTML = '<p class="text-white">No slides found.</p>';
    }

    // Remove loading
    const loading = sliderContainer.querySelector('.loading');
    if (loading) loading.remove();
  }, (error) => {
    console.error("Firebase Error:", error);
    sliderContainer.innerHTML = `<p class="text-red-500">Error: ${error.message}</p>`;
    const loading = sliderContainer.querySelector('.loading');
    if (loading) loading.remove();
  });
</script>
